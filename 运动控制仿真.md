# 单闭环直流调速

> 由于调速范围和静差率是一对矛盾的变量,没办法两全(在电机特性不变的情况下!)因此我们只能通过设计闭环来改善电机系统的特性!

## 建模分析

### 开环系统

在我们没有闭环的情况下,仅仅指定输入电压 `U` , 对于输出`n`有:
$$
n=\frac{U_{d0}-I_dR}{C_e}=\frac{K_pK_sU_{n}^{*}}{C_e}-\frac{RI_d}{C_e}
$$

### 闭环系统

在完成闭环之后,我们输入输出的关系发生了改变!
$$
n=\frac{K_pK_sU_{n}^{*}}{C_e(1+K)}-\frac{RI_d}{C_e(1+K)}
$$
其中$K=\frac{K_pK_s\alpha}{C_e}$

这里我们要注意的是,其实真正的负载扰动在于后面那个带$I_d$的项

可以看出,我们的闭环系统的转速降落(相比于空载时加入突然额定负载的情况下)小的多!

具体转速降$\varDelta n$的定量关系:
$$
\varDelta n_{cl}=\frac{\varDelta n_{op}}{1+K}
$$
有了这个性质之后,我们对于静差率和调速范围的要求就可以都有所提升了!
$$
s_{cl}=\frac{s_op}{1+K}\\
$$

$$
D_{cl}=(1+K)D_{op}
$$

### 具体原理解释

![](http://qny.adamli.top/lzd-1230/img-host/raw/master/image/IMG_20220429_001227_edit_1776565552474222.jpg)

当我们的负载加入后,在开环情况下(U不会做出任何反应),我们按照电机曲线不断下坠从`A->A'`,看到的物理现象就是,当电机拖的东西重一点后,转速下降很明显(在使用相同的电压下!)

但是在闭环情况下,我们的传感装置会检测到转速的变化从而提高电压!`A'->B`,从而我们可以看到现实的状况就是,虽然电机拖的东西重了,但是我给仍然给的是原来的电压,其转速下降不明显!

### 稳定性分析

> 在分析输入电压的稳定性的时候,我们把$I_{dL}$支路打断,只分析前向通路

其稳定条件为:$K<\frac{T_m}{T_s}+\frac{T_m}{T_1}+\frac{T_s}{T_1}$

其内在含义在于,当你每次根据误差进行的控制的作用延时越大,为了保证系统不发散,你作用的力度就要越小。

## 仿真

### 信号分析

![](http://qny.adamli.top/lzd-1230/img-host/raw/master/image/344222A22EFAC9ED57453451A160525C.png)

### 仿真模块搭建

+ 整体概览

![](http://qny.adamli.top/lzd-1230/img-host/raw/master/image/20220429102009.png)

其中负反馈参数 $\alpha$ 是根据你所期望的的 $U^*$ 与 $n_N$ 之间的比例来设置的!

+ 电机驱动部分

![](http://qny.adamli.top/lzd-1230/img-host/raw/master/image/20220429102618.png)

对于2个桥臂的`H桥`电路来说,我们需要创造4路`PWM`输出,来分别控制四个管子的导通与关断!

其中我们采用三角波调制的方法来完成`PWM`波形的产生,其中可以指定三角波的频率来对应上`PWM`的频率![](http://qny.adamli.top/lzd-1230/img-host/raw/master/image/20220429102548.png)

+ 电机模块

对于电机模块来说,主要是看到我们负载电流的扰动以及如何限制我们在加速过程中,电枢电流不过大,保证电机安全不冒烟。

![](http://qny.adamli.top/lzd-1230/img-host/raw/master/image/20220429102732.png)

对于电流截止负反馈,其实现原理为: 在电枢回路创建一个小电阻,来引出一个与当前 $I_d$ 相关的电压!然后与我们额外的一个参考电压进行比较。

如果 $I_d$ 引出的电压大于参考电压,说明电机**输出的转矩需要受到限制了**! 不然 $I_d$ 再大就该冒烟了!

+ 电流截止负反馈

![](http://qny.adamli.top/lzd-1230/img-host/raw/master/image/20220429103630.png)

其输出最终以负反馈的形式拉回到计算误差的地方

![](http://qny.adamli.top/lzd-1230/img-host/raw/master/image/20220429105058.png)

这样,当 $I_d$ 超过阈值之后,负反馈开始生效, 这样可以削弱输入到控制器的误差 `E(s)` 最终让控制器输出的控制信号减弱!以达到限制加速速度从而限制 $I_d$ 的作用!

可以看到在加上了电流截止负反馈后，电机的启动速度明显变慢了！因为你想要限制 $I_d$ 其实就是在限制加速速度: $T=C_T\varPhi I_d $

![](http://qny.adamli.top/lzd-1230/img-host/raw/master/image/20220429111816.png)



